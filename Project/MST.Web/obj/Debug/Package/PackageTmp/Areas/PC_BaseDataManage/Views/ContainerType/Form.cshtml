@{
    ViewBag.Title = "Form";
    Layout = "~/Views/Shared/_Form.cshtml";
}
<script>
    var keyValue = $.request("keyValue");
    $(function () {
        initControl();
        if (!!keyValue) {
            $.ajax({
                url: "/PC_BaseDataManage/ContainerType/GetFormJson",
                data: { keyValue: keyValue },
                dataType: "json",
                async: false,
                success: function (data) {
                    $.checkLogin(data);
                    $("#form1").formSerialize(data);
                    $("#ContainerTypeCode").attr("disabled", "disabled");
                    $("#ContainerKind").select2({ "disabled": "readonly" });
                }
            });
        }

        $("#ContainerKind").bind("change", function () {
            var kind = $("#ContainerKind").select2().val();
            if (kind == "Box" || kind == "Plastic") {
                var StationIn_Normal_Id = $("#InStationID").find("[StationCode='StationIn_Normal']").attr("value");
                $("#InStationID").val(StationIn_Normal_Id).trigger("change");

                var StationOut_Normal_Id = $("#OutStationID").find("[StationCode='StationOut_Normal']").attr("value");
                $("#OutStationID").val(StationOut_Normal_Id).trigger("change");
            }
            else if (kind == "Rack") {
                var StationIn_Big_Id = $("#InStationID").find("[StationCode='StationIn_BigItem']").attr("value");
                $("#InStationID").val(StationIn_Big_Id).trigger("change");

                var StationOut_Big_Id = $("#OutStationID").find("[StationCode='StationOut_BigItem']").attr("value");
                $("#OutStationID").val(StationOut_Big_Id).trigger("change");
            }
            else {
                $("#InStationID").val("").trigger("change");
                $("#OutStationID").val("").trigger("change");
            }
        });

        $.hideBaseData();
    });

    function initControl() {

        $("#ContainerKind").bindSelect({
            url: "/SystemManage/ItemsData/GetDicList?entityName=T_ContainerType&fieldName=ContainerKind",
            id: "F_ItemCode",
            text: "F_ItemName"
        });

        $("#InStationID").bindSelect({
            url: "/PC_BaseDataManage/ContainerType/GetStationDicList?type=In",
            id: "F_Id",
            text: "StationName",
            attr: "StationCode"
        });

        $("#OutStationID").bindSelect({
            url: "/PC_BaseDataManage/ContainerType/GetStationDicList?type=Out",
            id: "F_Id",
            text: "StationName",
            attr: "StationCode"
        });
    }


    function submitForm() {
        if (!$('#form1').formValid()) {
            return false;
        }
        $.submitForm({
            url: "/PC_BaseDataManage/ContainerType/SubmitForm?keyValue=" + keyValue,
            param: $("#form1").formSerialize(),
            success: function () {
                $.currentWindow().$("#gridList").trigger("reloadGrid");
            },
            error: function (data) {
                $.modalMsg(data.message, data.state);
            }
        })
    }
</script>

<form id="form1">
    <div style="margin-bottom: 0px; border-radius: 0px;" class="alert alert-warning alert-dismissable">
        <strong>注意：</strong>&nbsp;容器深度范围、宽度范围、高度范围，任意一组值若都为0，则只可存放在对应维度也为0的货位中
    </div>
    <div style="padding-top: 20px; margin-right: 20px;">
        <table class="form">
            <tr>
                <th class="formTitle">容器类型编码</th>
                <td class="formValue">
                    <input id="ContainerTypeCode" name="ContainerTypeCode" type="text" class="form-control required" placeholder="请输入容器类型编码" />
                </td>
                <th class="formTitle">容器类型名称</th>
                <td class="formValue">
                    <input id="ContainerTypeName" name="ContainerTypeName" type="text" class="form-control required" placeholder="请输入容器类型名称" />
                </td>
            </tr>
            <tr>
                <th class="formTitle">容器大类</th>
                <td class="formValue">
                    <select id="ContainerKind" name="ContainerKind" class="form-control required">
                        <option value="">==请选择==</option>
                    </select>
                </td>
                <th class="formTitle">入库站台</th>
                <td class="formValue">
                    <select id="InStationID" name="InStationID" disabled="disabled" class="form-control required">
                        <option value="">==请选择==</option>
                    </select>
                </td>

            </tr>
            <tr>
                <th class="formTitle">出库站台</th>
                <td class="formValue">
                    <select id="OutStationID" name="OutStationID" disabled="disabled" class="form-control required">
                        <option value="">==请选择==</option>
                    </select>
                </td>
                <th class="formTitle">深</th>
                <td class="formValue">
                    <input id="BorderLong" name="BorderLong" type="text" class="form-control required" placeholder="请输入深" />
                </td>
            </tr>
            <tr>
                <th class="formTitle">宽</th>
                <td class="formValue">
                    <input id="BorderWidth" name="BorderWidth" type="text" class="form-control required" placeholder="请输入宽" />
                </td>
                <th class="formTitle">高</th>
                <td class="formValue">
                    <input id="BorderHeight" name="BorderHeight" type="text" class="form-control required" placeholder="请输入高" />
                </td>
            </tr>
            <tr>
                <th class="formTitle">货位最小深</th>
                <td class="formValue">
                    <input id="LocMinLong" name="LocMinLong" type="text" class="form-control required" placeholder="分配的货位需大于等于该值" />
                </td>
                <th class="formTitle">货位最小宽</th>
                <td class="formValue">
                    <input id="LocMinWidth" name="LocMinWidth" type="text" class="form-control required" placeholder="分配的货位需大于等于该值" />
                </td>

            </tr>
            <tr>
                <th class="formTitle">货位最小高</th>
                <td class="formValue">
                    <input id="LocMinHeight" name="LocMinHeight" type="text" class="form-control required" placeholder="分配的货位需大于等于该值" />
                </td>
                <th class="formTitle">货位最大深</th>
                <td class="formValue">
                    <input id="LocMaxLong" name="LocMaxLong" type="text" class="form-control" placeholder="分配的货位需小于等于该值(为0则不受限制)" />
                </td>
            </tr>
            <tr>
                <th class="formTitle">货位最大宽</th>
                <td class="formValue">
                    <input id="LocMaxWidth" name="LocMaxWidth" type="text" class="form-control" placeholder="分配的货位需小于等于该值(为0则不受限制)" />
                </td>
                <th class="formTitle">货位最大高</th>
                <td class="formValue">
                    <input id="LocMaxHeight" name="LocMaxHeight" type="text" class="form-control" placeholder="分配的货位需小于等于该值(为0则不受限制)" />
                </td>
            </tr>
            <tr>
                <th class="formTitle">AGV箱型</th>
                <td class="formValue">
                    <input id="AGVContainerTypeCode" name="AGVContainerTypeCode" type="text" class="form-control" placeholder="映射AGV平台箱型" />
                </td>
                <th class="formTitle"></th>
                <td class="formValue">
                </td>
            </tr>
            <tr>
                <th class="formTitle">选项</th>
                <td class="formValue" colspan="3">
                    <div class="ckbox">
                        <input id="IsBase" name="IsBase" sysbasedata="yes" type="checkbox"><label for="IsBase">系统数据</label>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</form>
